<!-- ▼ライブラリ -->
<!-- jQuery (3.3.1)  -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<!-- *********************************************
 * シェアボタンの変更
 * 【参考】
 * シンプルで美しいはてなブログの新テーマ「Minimalism」を公開しました。 - ひつじの雑記帳
 * https://hitsuzi.hatenablog.com/entry/minimalism
************************************************ -->
<div class="shrbtn">
  <!-- Twitter -->
  <a class="share_btn" title="このエントリーをTwitterでシェア"
    href="http://twitter.com/intent/tweet?text={Title} {URLEncodedPermalink}">
    <i class="fa fa-twitter"></i>
  </a>

  <!-- はてなブックマーク -->
  <a class="share_btn" title="このエントリーをはてなブックマークでシェア"
    href="http://b.hatena.ne.jp/entry/{URLEncodedPermalink}">
    <span class="htvcenter" style="line-height: 1.6;">
      <i class="blogicon-bookmark" style="font-size:22px"></i>
    </span>
  </a>

  <!-- Facebook -->
  <a class="share_btn" title="このエントリーをFacebookでシェア"
    href="http://www.facebook.com/sharer.php?u={URLEncodedPermalink}">
    <i class="fa fa-facebook"></i>
  </a>

  <!-- Tumblr -->
  <a class="share_btn" title="このエントリーをTumblrでシェア"
    href="https://www.tumblr.com/widgets/share/tool?posttype=link&amp;title={Title}&amp;canonicalUrl={URLEncodedPermalink}"
    target="_blank">
    <i class="fa fa-tumblr-square" aria-hidden="true"></i>
  </a>

  <!-- Pocket -->
  <a class="share_btn" title="このエントリーをPocketに追加する"
    href="http://getpocket.com/edit?url={URLEncodedPermalink}">
    <i class="fa fa-get-pocket"></i>
  </a>

  <!-- feedly -->
  <a class="share_btn" title="このブログのフィードを取得する"
    href="http://feedly.com/i/subscription/feed/http://https://yuru-wota.hateblo.jp/feed"
    target="_blank">
    <i class="fa fa-rss"></i>
  </a>

  <!-- 読者登録 -->
  <a class="share_btn" title="読者登録してみる"
    href="http://blog.hatena.ne.jp/yuricks7/yuru-wota.hateblo.jp/subscribe"
    target="_blank">
    <i class="fas fa-book" style='font-family: "FontAwesome";'></i>
  </a>
</div>

<!-- *********************************************
 * サイトマップから最新の更新日を取得
 *
 * 【参考】
 * 【無料はてなブログ】【カスタマイズ】更新日の表示【Minimalism】【Brooklyn】【反映されない】【時刻を消す】 - 低所得の青色申告個人事業主のブログ
 * https://account-it-dentist.hatenablog.com/entry/blog-custom003 *
 *
 * ～以下、作成者様のコメント～
 *
 * 更新日時表示ちょっと手を入れてある
 * Show lastmod for Hatena Blog v1.0.1
 * Date: 2016-12-20
 * Copyright (c) 2016 https://www.tsubasa-note.blog/
 * Released under the MIT license:
 * http://opensource.org/licenses/mit-license.php
************************************************ -->
<script>
  ;
  (function ($) {
    'use strict';
    var urls = [],
        opts = { cache: false, dataType: 'xml' },
        p,
        url  = 'https://www.yuru-wota.com/sitemap_index.xml';
    function parseSitemapXML(url) {
      var d = new $.Deferred;

      $.ajax($.extend(opts, { url: url })).done(function (xml) {
        $(xml).find('sitemap').each(function () {
          urls.push($(this).find('loc').text());
        });
        d.resolve();
      }).fail(function () {
        d.reject();
      });
      return d.promise();
    }

    function findURL(url) {
      $.ajax($.extend(opts, { url: url })).done(function (xml) {
        var isMatched = false;
        $(xml).find('url').each(function () {
          var $this = $(this);

          if ($this.find('loc').text() === location.href) {
            isMatched = true;
            appendLastmod($this.find('lastmod').text());
            return false;
          }
        });

        if (!isMatched) nextURL();
      }).fail(function () { });
    }

    function nextURL() {
      urls.shift();
      if (urls.length) findURL(urls[0]);
    }

    function appendLastmod(lastmod) {
      var lastDate   = lastmod.split('T');
      var $container =  $('<div></div>',   { 'class': 'lastmod' });
      $container.append($('<span></span>', { 'class': 'date-year' }).text(lastDate[0].split('-')[0]));
      $container.append($('<span></span>', { 'class': 'hyphen' }).text('-'));
      $container.append($('<span></span>', { 'class': 'date-month' }).text(lastDate[0].split('-')[1]));
      $container.append($('<span></span>', { 'class': 'hyphen' }).text('-'));
      $container.append($('<span></span>', { 'class': 'date-day' }).text(lastDate[0].split('-')[2]));

      if ($('.entry-header > .date').get(0).tagName.toLowerCase() === 'span') {
        $('.entry-title').before($container);
      } else {
        $('.entry-date').append($container);
      }
    }

    p = parseSitemapXML(url);
    p.done(function () { findURL(urls[0]) });
    p.fail(function (error) { });
  })(jQuery);
</script>

<!-- *********************************************
 * コードブロックに行番号を追加
 *
 * 【参考】
 * 【はてなブログ】コード部分に行番号を表示するカスタマイズ - そういうのがいいブログ
 * https://souiunogaii.hatenablog.com/entry/hatenablog-codeline
************************************************ -->
<script>
  var codeBlocks = document.getElementsByClassName('code');
  [].forEach.call(codeBlocks, function(e) {
    if (!/lang/.test(e.className)) {
        return;
    }

    var lines     = e.innerHTML.split(/\n/);
    var codeBlock = "";
    lines.forEach(function(line){
      if(line != ""){
        codeBlock += '<div class="code-line">' + line + '</div>';
      }
    })

    e.innerHTML = codeBlock;
  });
</script>
